# 📧 이메일 수집 시스템 QA 시나리오

## 📋 테스트 개요

### 테스트 목적
이메일 수집 시스템의 정확성, 안정성, 사용자 경험을 검증하고 모든 엣지케이스를 테스트합니다.

### 테스트 범위
- 이메일 수집 모달 표시/숨김
- 이메일 유효성 검증
- 서버 통신 및 오류 처리
- 다운로드 제한과의 연동
- 사용자 경험 및 접근성

### 지원 기능
- 이메일 주소 수집
- 이름 수집 (선택사항)
- 구독 확인
- 구독 해지
- 구독자 목록 조회

---

## 🧪 테스트 시나리오

### 1. 기본 기능 테스트

#### 1.1 이메일 수집 모달 표시
**목적**: 다운로드 제한에 도달했을 때 이메일 수집 모달이 정확히 표시되는지 확인

**테스트 케이스**:
- **TC-EMAIL-001**: 다운로드 5회 후 이메일 수집 모달 표시
- **TC-EMAIL-002**: 이메일 수집 모달 제목 및 설명 텍스트 확인
- **TC-EMAIL-003**: 이메일 수집 모달 닫기 버튼 동작
- **TC-EMAIL-004**: 이메일 수집 모달 배경 클릭 시 닫기

**예상 결과**:
- 다운로드 5회 후 모달이 정확히 표시됨
- 모달 내용이 명확하고 이해하기 쉬움
- 닫기 버튼과 배경 클릭으로 모달이 닫힘

#### 1.2 이메일 유효성 검증
**목적**: 입력된 이메일 주소의 유효성을 정확히 검증하는지 확인

**테스트 케이스**:
- **TC-EMAIL-005**: 유효한 이메일 주소 입력 (예: user@example.com)
- **TC-EMAIL-006**: 잘못된 이메일 형식 입력 (예: invalid-email)
- **TC-EMAIL-007**: 빈 이메일 주소 입력
- **TC-EMAIL-008**: 특수문자가 포함된 이메일 (예: user+tag@example.com)
- **TC-EMAIL-009**: 국제화 도메인 이메일 (예: user@한국.com)
- **TC-EMAIL-010**: 매우 긴 이메일 주소 (320자 이상)

**예상 결과**:
- 유효한 이메일은 통과
- 잘못된 형식은 오류 메시지 표시
- 빈 이메일은 필수 입력 오류 표시
- 특수문자 이메일은 정상 처리
- 국제화 도메인은 정상 처리
- 긴 이메일은 길이 제한 오류 표시

#### 1.3 이름 입력 (선택사항)
**목적**: 이름 입력 필드가 선택사항으로 정상 작동하는지 확인

**테스트 케이스**:
- **TC-EMAIL-011**: 이름 없이 이메일만 입력
- **TC-EMAIL-012**: 이름과 이메일 모두 입력
- **TC-EMAIL-013**: 이름에 특수문자 포함 (예: 김철수-이)
- **TC-EMAIL-014**: 이름에 숫자 포함 (예: 김철수123)
- **TC-EMAIL-015**: 매우 긴 이름 (100자 이상)

**예상 결과**:
- 이름 없이도 구독 가능
- 이름과 이메일 모두 입력 시 정상 처리
- 특수문자 이름은 정상 처리
- 숫자 포함 이름은 정상 처리
- 긴 이름은 길이 제한 오류 표시

### 2. 서버 통신 테스트

#### 2.1 구독 성공
**목적**: 정상적인 구독 요청이 서버에 성공적으로 전송되는지 확인

**테스트 케이스**:
- **TC-EMAIL-016**: 유효한 이메일로 구독 요청
- **TC-EMAIL-017**: 이름과 이메일로 구독 요청
- **TC-EMAIL-018**: 이미 구독된 이메일로 재구독 요청

**예상 결과**:
- 구독 성공 메시지 표시
- 모달이 자동으로 닫힘
- 다운로드 제한이 해제됨
- 재구독 시 중복 구독 메시지 표시

#### 2.2 서버 오류 처리
**목적**: 서버 오류 상황에서 적절한 오류 처리가 되는지 확인

**테스트 케이스**:
- **TC-EMAIL-019**: 서버 연결 실패 (네트워크 오류)
- **TC-EMAIL-020**: 서버 500 오류 응답
- **TC-EMAIL-021**: 서버 400 오류 응답 (잘못된 요청)
- **TC-EMAIL-022**: 서버 409 오류 응답 (중복 구독)
- **TC-EMAIL-023**: 서버 응답 시간 초과 (30초 이상)

**예상 결과**:
- 네트워크 오류 시 재시도 안내 메시지
- 서버 오류 시 관리자 문의 안내
- 잘못된 요청 시 입력값 확인 안내
- 중복 구독 시 이미 구독됨 메시지
- 응답 시간 초과 시 재시도 안내

#### 2.3 구독 해지
**목적**: 구독 해지 기능이 정상 작동하는지 확인

**테스트 케이스**:
- **TC-EMAIL-024**: 구독된 이메일로 해지 요청
- **TC-EMAIL-025**: 구독되지 않은 이메일로 해지 요청
- **TC-EMAIL-026**: 잘못된 이메일 형식으로 해지 요청

**예상 결과**:
- 구독된 이메일 해지 성공
- 구독되지 않은 이메일은 해지 불가 메시지
- 잘못된 형식은 유효성 검증 오류

### 3. 엣지케이스 테스트

#### 3.1 입력값 엣지케이스
**목적**: 극단적인 입력값에 대한 안전한 처리를 확인

**테스트 케이스**:
- **TC-EMAIL-027**: 이메일 주소에 공백 포함 (예: " user@example.com ")
- **TC-EMAIL-028**: 이메일 주소에 탭 문자 포함
- **TC-EMAIL-029**: 이메일 주소에 줄바꿈 문자 포함
- **TC-EMAIL-030**: 이메일 주소에 HTML 태그 포함 (예: <script>alert('xss')</script>@example.com)
- **TC-EMAIL-031**: 이메일 주소에 SQL 인젝션 시도 (예: '; DROP TABLE users; --@example.com)
- **TC-EMAIL-032**: 이메일 주소에 XSS 시도 (예: javascript:alert('xss')@example.com)

**예상 결과**:
- 공백, 탭, 줄바꿈은 자동 제거
- HTML 태그는 이스케이프 처리
- SQL 인젝션은 차단
- XSS 시도는 차단
- 모든 악의적 입력은 안전하게 처리

#### 3.2 네트워크 엣지케이스
**목적**: 네트워크 문제 상황에서의 안정성을 확인

**테스트 케이스**:
- **TC-EMAIL-033**: 인터넷 연결 끊김 상태에서 구독 시도
- **TC-EMAIL-034**: 매우 느린 네트워크에서 구독 시도
- **TC-EMAIL-035**: 네트워크가 불안정한 상태에서 구독 시도
- **TC-EMAIL-036**: 모바일 데이터 사용 중 구독 시도

**예상 결과**:
- 연결 끊김 시 재연결 안내
- 느린 네트워크 시 로딩 표시
- 불안정한 네트워크 시 재시도 옵션
- 모바일 데이터 사용 시 데이터 사용량 안내

#### 3.3 브라우저 호환성
**목적**: 다양한 브라우저에서의 정상 작동을 확인

**테스트 케이스**:
- **TC-EMAIL-037**: Chrome 최신 버전에서 테스트
- **TC-EMAIL-038**: Firefox 최신 버전에서 테스트
- **TC-EMAIL-039**: Safari 최신 버전에서 테스트
- **TC-EMAIL-040**: Edge 최신 버전에서 테스트
- **TC-EMAIL-041**: Internet Explorer 11에서 테스트 (폴백)

**예상 결과**:
- 모든 최신 브라우저에서 정상 작동
- IE11에서도 기본 기능 작동
- 브라우저별 특성에 맞는 최적화

#### 3.4 모바일 디바이스
**목적**: 모바일 환경에서의 사용성을 확인

**테스트 케이스**:
- **TC-EMAIL-042**: iOS Safari에서 테스트
- **TC-EMAIL-043**: Android Chrome에서 테스트
- **TC-EMAIL-044**: 모바일 화면 크기에서 모달 표시
- **TC-EMAIL-045**: 모바일 키보드 입력 테스트
- **TC-EMAIL-046**: 모바일 터치 이벤트 테스트

**예상 결과**:
- 모바일에서 모달이 적절히 표시
- 터치 이벤트 정상 작동
- 모바일 키보드 입력 정상 처리
- 반응형 디자인 적용

### 4. 성능 테스트

#### 4.1 응답 시간
**목적**: 이메일 수집 시스템의 응답 시간을 측정

**테스트 케이스**:
- **TC-EMAIL-047**: 구독 요청 응답 시간 측정 (목표: 2초 이내)
- **TC-EMAIL-048**: 구독 해지 요청 응답 시간 측정 (목표: 2초 이내)
- **TC-EMAIL-049**: 구독자 목록 조회 응답 시간 측정 (목표: 3초 이내)

**예상 결과**:
- 모든 요청이 목표 시간 내에 완료
- 사용자가 기다리는 시간이 최소화
- 서버 부하가 적절히 관리됨

#### 4.2 동시 사용자
**목적**: 여러 사용자가 동시에 이메일 수집을 사용할 때의 안정성 확인

**테스트 케이스**:
- **TC-EMAIL-050**: 10명이 동시에 구독 요청
- **TC-EMAIL-051**: 50명이 동시에 구독 요청
- **TC-EMAIL-052**: 100명이 동시에 구독 요청

**예상 결과**:
- 모든 동시 요청이 정상 처리
- 서버가 안정적으로 작동
- 데이터 일관성 유지

### 5. 보안 테스트

#### 5.1 입력값 보안
**목적**: 악의적인 입력값에 대한 보안을 확인

**테스트 케이스**:
- **TC-EMAIL-053**: XSS 공격 시도
- **TC-EMAIL-054**: SQL 인젝션 시도
- **TC-EMAIL-055**: CSRF 공격 시도
- **TC-EMAIL-056**: 파일 업로드 공격 시도

**예상 결과**:
- 모든 공격 시도가 차단됨
- 사용자 데이터가 안전하게 보호됨
- 시스템이 안정적으로 작동

#### 5.2 데이터 보호
**목적**: 수집된 이메일 데이터의 보호를 확인

**테스트 케이스**:
- **TC-EMAIL-057**: 이메일 데이터 암호화 확인
- **TC-EMAIL-058**: 개인정보 처리 방침 준수 확인
- **TC-EMAIL-059**: 데이터 보관 기간 확인
- **TC-EMAIL-060**: 데이터 삭제 요청 처리 확인

**예상 결과**:
- 이메일 데이터가 암호화되어 저장
- 개인정보 처리 방침이 준수됨
- 데이터 보관 기간이 명확히 정의됨
- 데이터 삭제 요청이 정상 처리됨

### 6. 사용자 경험 테스트

#### 6.1 접근성
**목적**: 접근성 가이드라인을 준수하는지 확인

**테스트 케이스**:
- **TC-EMAIL-061**: 키보드만으로 모달 조작 가능
- **TC-EMAIL-062**: 스크린 리더 호환성 확인
- **TC-EMAIL-063**: 색상 대비 확인
- **TC-EMAIL-064**: 폰트 크기 조정 가능

**예상 결과**:
- 키보드 접근성 완벽 지원
- 스크린 리더에서 정상 작동
- 색상 대비가 충분함
- 폰트 크기 조정이 가능함

#### 6.2 사용성
**목적**: 사용자가 쉽게 사용할 수 있는지 확인

**테스트 케이스**:
- **TC-EMAIL-065**: 모달 표시 시 포커스 이동
- **TC-EMAIL-066**: 오류 메시지 명확성
- **TC-EMAIL-067**: 성공 메시지 명확성
- **TC-EMAIL-068**: 로딩 상태 표시

**예상 결과**:
- 모달 표시 시 포커스가 적절히 이동
- 오류 메시지가 명확하고 도움이 됨
- 성공 메시지가 명확함
- 로딩 상태가 명확히 표시됨

---

## 🔧 테스트 실행 방법

### 자동화 테스트
```bash
# 이메일 수집 기능 테스트
cd scripts
node email_collection_test.js

# 구독 API 테스트
node newsletter_api_test.js

# 보안 테스트
node security_test.js
```

### 수동 테스트
1. **브라우저에서 테스트**
   - 다운로드 5회 후 이메일 수집 모달 확인
   - 다양한 이메일 형식으로 구독 시도
   - 오류 상황 시나리오 테스트

2. **모바일에서 테스트**
   - 모바일 브라우저에서 모달 표시 확인
   - 터치 이벤트 정상 작동 확인
   - 반응형 디자인 확인

3. **네트워크 테스트**
   - 네트워크 연결 끊김 상황 테스트
   - 느린 네트워크 환경 테스트
   - 불안정한 네트워크 환경 테스트

---

## 📊 테스트 결과 평가 기준

### 기능적 요구사항
- ✅ **이메일 수집**: 정확한 이메일 주소 수집
- ✅ **유효성 검증**: 이메일 형식 검증
- ✅ **서버 통신**: 안정적인 API 통신
- ✅ **오류 처리**: 적절한 오류 메시지 표시
- ✅ **구독 관리**: 구독/해지 기능

### 비기능적 요구사항
- ✅ **성능**: 빠른 응답 시간 (2초 이내)
- ✅ **보안**: 악의적 입력 차단
- ✅ **접근성**: 키보드 및 스크린 리더 지원
- ✅ **사용성**: 직관적인 사용자 인터페이스
- ✅ **안정성**: 엣지케이스 안전 처리

### 품질 요구사항
- ✅ **코드 품질**: ESLint 통과, 타입 안전성
- ✅ **테스트 커버리지**: 100% 핵심 로직 테스트
- ✅ **문서화**: 완전한 API 문서
- ✅ **유지보수성**: 모듈화된 구조

---

## 🎯 성공 기준

### 필수 요구사항 (Must Have)
- 이메일 수집 모달이 정확히 표시됨
- 이메일 유효성 검증이 정확히 작동함
- 서버 통신이 안정적으로 작동함
- 기본적인 오류 처리가 작동함

### 중요 요구사항 (Should Have)
- 엣지케이스가 안전하게 처리됨
- 성능이 목표 기준을 만족함
- 보안이 적절히 구현됨
- 접근성이 준수됨

### 선택 요구사항 (Could Have)
- 고급 오류 처리 기능
- 사용자 분석 기능
- A/B 테스트 기능
- 고급 보안 기능

---

**📧 이메일 수집 시스템이 모든 시나리오에서 안정적으로 작동할 준비가 되었습니다!**

